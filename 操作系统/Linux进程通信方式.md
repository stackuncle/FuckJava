## 一、进程间通信的目的
- 数据传输：一个进程需要将它的数据发送给另一个进程，发送的数据量在一个字节到几M字节之间
- 共享数据：多个进程要操作共享数据，一个进程对共享数据
- 信息传递：一个进程需要向另一个进程发送消息，通知它发生了某种事件。
- 资源共享：多个进程之间共享同样的数据。为了做到这一点，需要内核提供锁和同步机制。
- 进程控制：有些进程希望完全控制另一个进程的执行，此时控制进程希望能够拦截另一个进程的所有陷入和异常，病能够及时知道它的状态改变

## 二、进程间通信的概念
每个进程各自有不同的用户地址空间，任何一个进程的变量在另一个进程中都是看不到的，所以进程之间要交换数据必须通过内核，在内核中开辟出一块缓冲区。一个进程把自己的数据从用户空间拷贝到内核缓冲区，另一个进程再从内核缓冲区把数据读走。内核提供的这种机制称为进程间通信(IPC,Inter Process Communication)

## 三、进程间通信方式
Linux进程间基本的通信方式主要有：管道(pipe)(包括匿名管道和命名管道)、信号(signal)、消息队列(queue)、共享内存、信号量和套接字。

下面逐渐介绍这几种方式：

### 1.管道：管道的实质是一个内核缓冲区，管道的作用正如其名，需要通信的两个进程在管道的两端，进程利用管道传递信息。管道对于管道两端的进程而言，就是一个文件，但是这个文件比较特殊，它不属于文件系统并且只存在于内存中。

管道依据是否有名字分为匿名管道和命名管道(有名管道)，这两种管道有一定的区别。

匿名管道有几个重要的限制：

管道是半双工的，数据只能在一个方向上流动，A进程传给B进程，不能反向传递
管道只能用于父子进程或兄弟进程之间的通信，即具有亲缘关系的进程。
命名管道允许没有亲缘关系的进程进行通信。命名管道不同于匿名管道之处在于它提供了一个路径名与之关联，这样一个进程即使与创建有名管道的进程不存在亲缘关系，只要可以访问该路径，就能通过有名管道互相通信。

### 2.信号：
信号是软件层次上对中断机制的一种模拟，是一种异步通信方式，进程不必通过任何操作来等待信号的到达。信号可以在用户空间进程和内核之间直接交互，内核可以利用信号来通知用户空间的进程发生了哪些系统事件。

信号来源：

信号事件的发生有两个来源：硬件来源，比如我们按下了键盘或者其它硬件故障；软件来源，最常用发送信号的系统函数是kill, raise, alarm和setitimer以及sigqueue函数，软件来源还包括一些非法运算等操作。

进程对信号的响应：

进程可以通过三种方式来响应信号：(1)忽略信号，即对信号不做任何处理，但是有两个信号是不能忽略的：SIGKLL和SIGSTOP；（2）捕捉信号，定义信号处理函数，当信号发生时，执行相应的处理函数；（3）执行缺省操作，Linux对每种信号都规定了默认操作。

### 3.消息队列：
消息队列是消息的链表,具有特定的格式,存放在内存中并由消息队列标识符标识，并且允许一个或多个进程向它写入与读取消息

### 4.共享内存：
使得多个进程可以可以直接读写同一块内存空间，是针对其他通信机制运行效率较低而设计的。

为了在多个进程间交换信息，内核专门留出了一块内存区，可以由需要访问的进程将其映射到自己的私有地址空间。进程就可以直接读写这一块内存而不需要进行数据的拷贝，从而大大提高效率。

需要注意的是：共享内存并未提供同步机制，在一个进程结束对共享内存的写操作之前，并无自动机制可以阻止另二个进程开始对它进行读取。所以，我们通常需要用其他的机制来同步对共享内存的访问。

### 5.信号量：
信号量实质上就是一个标识可用资源数量的计数器，它的值总是非负整数。而只有0和1两种取值的信号量叫做二进制信号量（或二值信号量），可用用来标识某个资源是否可用。

### 6.套接字：
套接字是更为基础的进程间通信机制，与其他方式不同的是，套接字可用于不同机器之间的进程间通信。

有两种类型的套接字：基于文件的和面向网络的。

(1).Unix套接字是基于文件的，并且拥有一个“家族名字”--AF_UNIX，它代表地址家族(address family)：UNIX。

(2).第二类型的套接字是基于网络的，它也有自己的家族名字--AF_INET，代表地址家族(address family):INTERNET

不管采用哪种地址家族，都有两种不同的套接字连接：面向连接的和无连接的。

(1)面向连接的套接字(SOCK_STREAM)：进行通信前必须建立一个连接，面向连接的通信提供序列化的、可靠地和不重复的数据交付，而没有记录边界。

这意味着每条信息可以被拆分成多个片段，并且每个片段都能确保到达目的地，然后在目的地将信息拼接起来。

实现这种连接类型的主要协议是传输控制协议(TCP)。

(2)无连接的套接字(SOCK_DGRAM)：在通信开始之前并不需要建立连接，在数据传输过程中并无法保证它的顺序性、可靠性或重复性。

然而,数据报确实保存了记录边界,这就意味着消息是以整体发送的,而并非首先分成多个片段。

由于面向连接的套接字所提供的保证,因此它们的设置以及对虚拟电路连接的维护需要大量的开销。然而,数据报不需要这些开销,即它的成本更加“低廉”

实现这种连接类型的主要协议是用户数据报协议(UDP)。